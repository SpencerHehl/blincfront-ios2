<ion-header>
    <ion-navbar>
        <ion-title style="font-weight:bold">
            Comments
        </ion-title>
    </ion-navbar>
</ion-header>
<ion-content style="background-color: #cbd3db">
    <ion-card [hidden]="post.isFlagged" style="width: 95vw">
        <ion-item style="background:#6a597d; color:white;">
            <ion-avatar item-start>
                <img [src]="post.poster?.profilePicture" (click)="viewProfile()">
            </ion-avatar>
            <h2 (click)="viewProfile()" style="font-weight:bold; color: white">{{post.poster?.fullName}}</h2>
            <ion-note>
                {{post.createdDate | dateAge}}
            </ion-note>
            <ion-buttons item-end>
                <button ion-button (click)="viewMore()" clear color="light"><ion-icon name="more"></ion-icon></button>
            </ion-buttons>
        </ion-item>
        <ion-card-content style="margin-top:10px;">
            <h2 style="font-weight:bold">{{post.content?.title}} <ion-icon *ngIf="post.content?.location" name="at" color="primary"></ion-icon> {{post.content?.location}}</h2>        
            <img *ngIf="post.content.contentType == 'photo'" [src]="post?.content.img">
            <p>{{post.content.body}}</p>
        </ion-card-content>
        <ion-row>
            <ion-col>
                <button ion-button item-start clear (click)="likePost(post._id)" [color]="likeColor">
                    <ion-icon name="thumbs-up" style="margin-right:5px;"></ion-icon> {{post.numLikes}} Likes
                </button>
            </ion-col>
            <ion-col>
              <button ion-button icon-left clear small (click)="viewLikes()" color="dark">
                <ion-icon name="eye" style="margin-right:5px;"></ion-icon> View
              </button>
            </ion-col>
        </ion-row>
    </ion-card>
    <ion-row *ngFor="let comment of postComments; let i = index">
        <comment-card [Comment]="comment" (reportEmitter)="reportComment($event, i)" (deleteEmitter)="deleteComment($event, i)"></comment-card>
    </ion-row>
    <ion-fab right bottom>
        <button ion-fab color="secondary"><ion-icon name="add"></ion-icon></button>
        <ion-fab-list side="top">
          <button ion-fab (click)="postText()"><ion-icon name="text"></ion-icon></button>
          <button ion-fab (click)="postPhoto()"><ion-icon name="camera"></ion-icon></button>
          <button ion-fab (click)="postSavedPhoto()"><ion-icon name="image"></ion-icon></button>
        </ion-fab-list>
    </ion-fab>
</ion-content>